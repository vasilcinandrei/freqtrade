{"version":3,"file":"DraggableContainer-2e1d1533.js","sources":["../../src/components/charts/DailyChart.vue"],"sourcesContent":["<template>\n  <e-charts\n    v-if=\"dailyStats.data\"\n    :option=\"dailyChartOptions\"\n    :theme=\"settingsStore.chartTheme\"\n    autoresize\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ComputedRef } from 'vue';\nimport ECharts from 'vue-echarts';\n// import { EChartsOption } from 'echarts';\n\nimport { use } from 'echarts/core';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { LineChart, BarChart } from 'echarts/charts';\nimport {\n  DatasetComponent,\n  GridComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  VisualMapComponent,\n} from 'echarts/components';\n\nimport { DailyReturnValue } from '@/types';\nimport { useSettingsStore } from '@/stores/settings';\nimport { EChartsOption } from 'echarts';\n\nuse([\n  BarChart,\n  LineChart,\n  CanvasRenderer,\n  GridComponent,\n  DatasetComponent,\n  LegendComponent,\n  TitleComponent,\n  TooltipComponent,\n  VisualMapComponent,\n]);\n\n// Define Column labels here to avoid typos\nconst CHART_ABS_PROFIT = 'Absolute profit';\nconst CHART_TRADE_COUNT = 'Trade Count';\n\nconst props = defineProps({\n  dailyStats: {\n    type: Object as () => DailyReturnValue,\n    required: true,\n  },\n  showTitle: {\n    type: Boolean,\n    default: true,\n  },\n});\n\nconst settingsStore = useSettingsStore();\nconst absoluteMin = computed(() =>\n  props.dailyStats.data.reduce(\n    (min, p) => (p.abs_profit < min ? p.abs_profit : min),\n    props.dailyStats.data[0]?.abs_profit,\n  ),\n);\nconst absoluteMax = computed(() =>\n  props.dailyStats.data.reduce(\n    (max, p) => (p.abs_profit > max ? p.abs_profit : max),\n    props.dailyStats.data[0]?.abs_profit,\n  ),\n);\nconst dailyChartOptions: ComputedRef<EChartsOption> = computed(() => {\n  return {\n    title: {\n      text: 'Daily profit',\n      show: props.showTitle,\n    },\n    backgroundColor: 'rgba(0, 0, 0, 0)',\n    dataset: {\n      dimensions: ['date', 'abs_profit', 'trade_count'],\n      source: props.dailyStats.data,\n    },\n    tooltip: {\n      trigger: 'axis',\n      axisPointer: {\n        type: 'line',\n        label: {\n          backgroundColor: '#6a7985',\n        },\n      },\n    },\n    legend: {\n      data: [CHART_ABS_PROFIT, CHART_TRADE_COUNT],\n      right: '5%',\n    },\n    xAxis: [\n      {\n        type: 'category',\n      },\n    ],\n    visualMap: [\n      {\n        dimension: 1,\n        seriesIndex: 0,\n        show: false,\n        pieces: [\n          {\n            max: 0.0,\n            min: absoluteMin.value,\n            color: 'red',\n          },\n          {\n            min: 0.0,\n            max: absoluteMax.value,\n            color: 'green',\n          },\n        ],\n      },\n    ],\n    yAxis: [\n      {\n        type: 'value',\n        name: CHART_ABS_PROFIT,\n        splitLine: {\n          show: false,\n        },\n        nameRotate: 90,\n        nameLocation: 'middle',\n        nameGap: 40,\n      },\n      {\n        type: 'value',\n        name: CHART_TRADE_COUNT,\n        nameRotate: 90,\n        nameLocation: 'middle',\n        nameGap: 30,\n      },\n    ],\n    series: [\n      {\n        type: 'line',\n        name: CHART_ABS_PROFIT,\n        // Color is induced by visualMap\n      },\n      {\n        type: 'bar',\n        name: CHART_TRADE_COUNT,\n        itemStyle: {\n          color: 'rgba(150,150,150,0.3)',\n        },\n        yAxisIndex: 1,\n      },\n    ],\n  };\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.echarts {\n  width: 100%;\n  height: 100%;\n  min-height: 240px;\n}\n</style>\n"],"names":["CHART_ABS_PROFIT","CHART_TRADE_COUNT","use","BarChart","LineChart","CanvasRenderer","GridComponent","DatasetComponent","LegendComponent","TitleComponent","TooltipComponent","VisualMapComponent","settingsStore","useSettingsStore","absoluteMin","computed","props","min","p","_a","absoluteMax","max","dailyChartOptions"],"mappings":"oRA2CA,MAAAA,EAAA,kBACAC,EAAA,2IAdAC,EAAA,CAAIC,EACFC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,CACA,CAAA,EAkBF,MAAAC,EAAAC,IACAC,EAAAC,EAAoB,WAAA,OAAAC,EAAA,WAAA,KAAA,OACI,CAAAC,EAAAC,IAAAA,EAAA,WAAAD,EAAAC,EAAA,WAAAD,GAC6BE,EAAAH,EAAA,WAAA,KAAA,CAAA,IAAA,YAAAG,EAAA,UACvB,EAC5B,EAEFC,EAAAL,EAAoB,WAAA,OAAAC,EAAA,WAAA,KAAA,OACI,CAAAK,EAAAH,IAAAA,EAAA,WAAAG,EAAAH,EAAA,WAAAG,GAC6BF,EAAAH,EAAA,WAAA,KAAA,CAAA,IAAA,YAAAG,EAAA,UACvB,EAC5B,EAEFG,EAAAP,EAAA,KACE,CAAO,MAAA,CACE,KAAA,eACC,KAAAC,EAAA,SACM,EACd,gBAAA,mBACiB,QAAA,CACR,WAAA,CAAA,OAAA,aAAA,aAAA,EACyC,OAAAA,EAAA,WAAA,IACvB,EAC3B,QAAA,CACS,QAAA,OACE,YAAA,CACI,KAAA,OACL,MAAA,CACC,gBAAA,SACY,CACnB,CACF,EACF,OAAA,CACQ,KAAA,CAAAhB,EAAAC,CAAA,EACoC,MAAA,IACnC,EACT,MAAA,CACO,CACL,KAAA,UACQ,CACR,EACF,UAAA,CACW,CACT,UAAA,EACa,YAAA,EACE,KAAA,GACP,OAAA,CACE,CACN,IAAA,EACO,IAAAa,EAAA,MACY,MAAA,KACV,EACT,CACA,IAAA,EACO,IAAAM,EAAA,MACY,MAAA,OACV,CACT,CACF,CACF,EACF,MAAA,CACO,CACL,KAAA,QACQ,KAAApB,EACA,UAAA,CACK,KAAA,EACH,EACR,WAAA,GACY,aAAA,SACE,QAAA,EACL,EACX,CACA,KAAA,QACQ,KAAAC,EACA,WAAA,GACM,aAAA,SACE,QAAA,EACL,CACX,EACF,OAAA,CACQ,CACN,KAAA,OACQ,KAAAD,CACA,EAER,CACA,KAAA,MACQ,KAAAC,EACA,UAAA,CACK,MAAA,uBACF,EACT,WAAA,CACY,CACd,CACF,EACF"}