import{a as x,D as A}from"./DraggableContainer-2e1d1533.js";import{C as K,P as F,T as M}from"./TradesLog-008a12e7.js";import{d as E,u as G,i as n,o as _,h as D,w as o,a as v,j as i,k as T,t as O,c as P,C as W,f as N,a3 as q,K as H,D as J,r as Q,E as k,aS as S,x as X,G as $,b as a,I as L}from"./index-aef5ad26.js";import{P as R,b as U}from"./InfoBox.vue_vue_type_script_setup_true_lang-85060789.js";import{T as j}from"./TradeList-e1b97a1e.js";import"./install-b71822da.js";import"./chartZoom-81ece22b.js";const Y={class:"d-flex flex-row"},Z={key:0},ee=["title"],te={class:"text-small"},ae={key:0},oe={class:"text-profit"},le={class:"text-loss"},se=E({__name:"BotComparisonList",setup(I){const t=G(),b=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],V=n(()=>{const B=[],d={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(t.allProfit).forEach(([s,l])=>{var m,f,p,h,y;const e=t.allOpenTrades[s].reduce((C,r)=>C+r.stake_amount,0),u=t.allOpenTrades[s].reduce((C,r)=>C+(r.total_profit_ratio??r.profit_ratio)*r.stake_amount,0)/e,c=t.allOpenTrades[s].reduce((C,r)=>C+(r.total_profit_abs??r.profit_abs??0),0);B.push({botId:s,botName:t.availableBots[s].botName,trades:`${t.allOpenTradeCount[s]} / ${((m=t.allBotState[s])==null?void 0:m.max_open_trades)||"N/A"}`,profitClosed:l.profit_closed_coin,profitClosedRatio:l.profit_closed_ratio||0,stakeCurrency:((f=t.allBotState[s])==null?void 0:f.stake_currency)||"",profitOpenRatio:u,profitOpen:c,wins:l.winning_trades,losses:l.losing_trades,balance:((p=t.allBalance[s])==null?void 0:p.total_bot)??((h=t.allBalance[s])==null?void 0:h.total),stakeCurrencyDecimals:((y=t.allBotState[s])==null?void 0:y.stake_currency_decimals)||3}),l.profit_closed_coin!==void 0&&(d.profitClosed+=l.profit_closed_coin,d.profitOpen+=c,d.wins+=l.winning_trades,d.losses+=l.losing_trades)}),B.push(d),B});return(B,d)=>{const s=q,l=H;return _(),D(l,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:V.value,fields:b},{"cell(botName)":o(e=>[v("div",Y,[e.item.botId&&i(t).botCount>1?(_(),D(s,{key:0,modelValue:i(t).botStores[e.item.botId].isSelected,"onUpdate:modelValue":u=>i(t).botStores[e.item.botId].isSelected=u,title:"Show bot in Dashboard"},null,8,["modelValue","onUpdate:modelValue"])):T("",!0),v("span",null,O(e.value),1)])]),"cell(profitOpen)":o(e=>[e.item.profitOpen&&e.item.botId!="Summary"?(_(),D(R,{key:0,"profit-ratio":e.item.profitOpenRatio,"profit-abs":e.item.profitOpen,"stake-currency":e.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(profitClosed)":o(e=>[e.item.profitClosed&&e.item.botId!="Summary"?(_(),D(R,{key:0,"profit-ratio":e.item.profitClosedRatio,"profit-abs":e.item.profitClosed,"stake-currency":e.item.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):T("",!0)]),"cell(balance)":o(e=>[e.item.balance?(_(),P("div",Z,[v("span",{title:e.item.stakeCurrency},O(i(W)(e.item.balance,e.item.stakeCurrencyDecimals)),9,ee),v("span",te,O(e.item.stakeCurrency),1)])):T("",!0)]),"cell(winVsLoss)":o(e=>[e.item.losses!==void 0?(_(),P("div",ae,[v("span",oe,O(e.item.wins),1),N(" / "),v("span",le,O(e.item.losses),1)])):T("",!0)]),_:1},8,["items"])}}}),re={class:"d-flex justify-content-center"},ie={class:"d-flex justify-content-center"},ye=E({__name:"DashboardView",setup(I){const t=G(),b=J(),V=Q(""),B=r=>{V.value=r},d=n(()=>["","sm","md","lg","xl"].includes(V.value)),s=n(()=>b.layoutLocked||!d.value),l=n(()=>d.value?b.dashboardLayout:[...b.getDashboardLayoutSm]),e=r=>{d.value&&(console.log("newlayout",r),console.log("saving dashboard"),b.dashboardLayout=r)},u=n(()=>k(l.value,S.dailyChart)),c=n(()=>k(l.value,S.botComparison)),m=n(()=>k(l.value,S.allOpenTrades)),f=n(()=>k(l.value,S.allClosedTrades)),p=n(()=>k(l.value,S.cumChartChart)),h=n(()=>k(l.value,S.profitDistributionChart)),y=n(()=>k(l.value,S.tradesLogChart)),C=n(()=>({sm:b.getDashboardLayoutSm}));return X(async()=>{await t.allGetDaily({timescale:30}),t.activeBot.getOpenTrades(),t.activeBot.getProfit()}),(r,ne)=>{const g=$("grid-item"),z=$("grid-layout");return _(),D(z,{class:"h-100 w-100","row-height":50,layout:l.value,"vertical-compact":!1,margin:[5,5],"responsive-layouts":C.value,"is-resizable":!s.value,"is-draggable":!s.value,responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:e,onBreakpointChanged:B},{default:o(({gridItemProps:w})=>[a(g,L(w,{i:u.value.i,x:u.value.x,y:u.value.y,w:u.value.w,h:u.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:`Daily Profit ${i(t).botCount>1?"combined":""}`},{default:o(()=>[i(t).allDailyStatsSelectedBots?(_(),D(A,{key:0,"daily-stats":i(t).allDailyStatsSelectedBots,"show-title":!1},null,8,["daily-stats"])):T("",!0)]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:c.value.i,x:c.value.x,y:c.value.y,w:c.value.w,h:c.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Bot comparison"},{default:o(()=>[a(se)]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:m.value.i,x:m.value.x,y:m.value.y,w:m.value.w,h:m.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,null,{header:o(()=>[v("div",re,[N(" Open Trades "),a(U,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[a(j,{"active-trades":"",trades:i(t).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:p.value.i,x:p.value.x,y:p.value.y,w:p.value.w,h:p.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Cumulative Profit"},{default:o(()=>[a(K,{trades:i(t).allTradesSelectedBots,"open-trades":i(t).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:f.value.i,x:f.value.x,y:f.value.y,w:f.value.w,h:f.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,null,{header:o(()=>[v("div",ie,[N(" Closed Trades "),a(U,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:o(()=>[a(j,{"active-trades":!1,"show-filter":"",trades:i(t).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:h.value.i,x:h.value.x,y:h.value.y,w:h.value.w,h:h.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Profit Distribution"},{default:o(()=>[a(F,{trades:i(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),a(g,L(w,{i:y.value.i,x:y.value.x,y:y.value.y,w:y.value.w,h:y.value.h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:o(()=>[a(x,{header:"Trades Log"},{default:o(()=>[a(M,{trades:i(t).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{ye as default};
//# sourceMappingURL=DashboardView-9553b988.js.map
